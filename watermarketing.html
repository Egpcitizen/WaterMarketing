<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Cut Water Loss, Save Millions — WaterLoss Insights</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Estimate your municipality’s water loss and discover savings with our free calculator and guide.">
  <meta property="og:title" content="Cut Water Loss, Save Millions">
  <meta property="og:description" content="Free assessment reveals hidden savings for municipal water utilities.">
  <meta property="og:image" content="https://waterlossinsights.com/og-image.jpg">
  <meta property="og:type" content="website">
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-XXXXXXX'); // Replace with your GA4 ID
  </script>
  <!-- Tailwind CSS (assumes PurgeCSS in production) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Animations and helpers */
    @keyframes fadeInUp { from {opacity:0; transform: translateY(12px)} to {opacity:1; transform:none} }
    .fade-in { animation: fadeInUp .6s ease both; }
    .focus-ring:focus { outline: none; box-shadow: 0 0 0 4px rgba(56,189,248,.35); }
    .glass { background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.05)); }
    .glow { box-shadow: 0 10px 30px rgba(34,197,94,.35); }
    .number::-webkit-outer-spin-button,.number::-webkit-inner-spin-button{ -webkit-appearance: none; margin:0;}
    .number{ -moz-appearance:textfield; }
    html { scroll-behavior: smooth; }
    /* Tooltip */
    .tooltip { position: relative; }
    .tooltip:hover::after {
      content: attr(data-tooltip);
      @apply absolute top-full left-1/2 -translate-x-1/2 mt-2 text-xs text-white bg-black/80 px-3 py-1.5 rounded-md;
    }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-sky-950 via-indigo-950 to-slate-900 text-white antialiased">
  <!-- Decorative blobs (lazy-load in production) -->
  <div class="pointer-events-none fixed -top-28 -left-24 h-[28rem] w-[28rem] rounded-full bg-sky-400/20 blur-3xl"></div>
  <div class="pointer-events-none fixed -bottom-40 -right-24 h-[32rem] w-[32rem] rounded-full bg-emerald-400/10 blur-3xl"></div>

  <!-- Header / Nav -->
  <header class="relative z-20">
    <div class="mx-auto max-w-7xl px-6 py-6 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="h-9 w-9 grid place-items-center rounded-lg bg-sky-400 text-sky-950 font-bold">WL</div>
        <span class="text-lg font-semibold tracking-tight">WaterLoss Insights</span>
      </div>
      <nav class="hidden md:flex items-center gap-6 text-white/90">
        <a href="https://egpcitizen.github.io/egp/portfolio.html" class="hover:text-white transition">Portfolio</a>
        <a href="#results" class="hover:text-white transition">Results</a>
        <a href="#how-it-works" class="hover:text-white transition">How it Works</a>
        <a href="#benefits" class="hover:text-white transition">Benefits</a>
        <a href="#calculator" class="hover:text-white transition">Calculator</a>
        <a href="#guide" class="hover:text-white transition">Guide</a>
      </nav>
      <div class="flex items-center gap-3">
        <button id="ctaCalculateTop" class="focus-ring rounded-lg bg-emerald-500 hover:bg-emerald-400 text-emerald-950 font-semibold px-4 py-2 transition glow">
          Calculate Your Loss
        </button>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <section id="hero" class="relative z-10">
    <div class="mx-auto max-w-7xl px-6 pt-8 pb-12 md:pt-16 md:pb-20 grid md:grid-cols-2 gap-10 items-center">
      <div class="fade-in">
        <h1 class="text-3xl md:text-5xl font-extrabold leading-tight">
          Your Municipality Loses <span id="heroLoss">$2.6M</span> to Leaks. <span class="text-emerald-400">Stop It Now.</span>
        </h1>
        <p class="mt-4 text-white/90 text-lg">
          Free assessment reveals hidden savings.
        </p>
        <div class="mt-6 flex flex-wrap items-center gap-4">
          <button id="ctaCalculateHero" class="focus-ring rounded-xl bg-emerald-500 hover:bg-emerald-400 text-emerald-950 font-semibold px-6 py-3 transition glow">
            Calculate Your Loss
          </button>
          <a href="#guide" class="focus-ring rounded-xl bg-white/10 hover:bg-white/15 text-white font-semibold px-6 py-3 transition border border-white/15">
            Download Free Guide
          </a>
        </div>
        <div class="mt-6 flex items-center gap-3 text-white/80">
          <svg class="h-5 w-5 text-emerald-400" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M9 16.17l-3.88-3.88a1 1 0 10-1.41 1.41l4.59 4.59a1 1 0 001.41 0l10-10a1 1 0 10-1.41-1.41L9 16.17z"/>
          </svg>
          Trusted by 50+ municipalities
        </div>
      </div>
      <!-- Video embed -->
      <div class="fade-in md:delay-100">
        <div class="relative rounded-2xl bg-white/5 border border-white/10 p-4">
          <iframe class="aspect-video rounded-xl w-full" src="https://www.youtube.com/embed/VIDEO_ID?rel=0" title="WaterLoss Insights Explainer" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
          <div class="absolute bottom-3 right-3 text-xs text-white/70 bg-black/30 px-2.5 py-1 rounded-md backdrop-blur">
            2-min explainer
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Social Proof -->
  <section id="social-proof" class="relative z-10">
    <div class="mx-auto max-w-7xl px-6 py-10 md:py-14">
      <div class="rounded-2xl bg-white/5 border border-white/10 p-6 md:p-8">
        <div class="grid md:grid-cols-5 gap-8 items-center">
          <div class="col-span-3 grid grid-cols-5 gap-6">
            <div class="h-14 rounded-lg bg-gradient-to-br from-cyan-400/20 to-cyan-300/10 border border-cyan-300/30 grid place-items-center">
              <svg viewBox="0 0 100 24" class="h-6 text-cyan-300" fill="currentColor"><text x="0" y="18" font-size="16" font-family="ui-sans-serif, system-ui">City A</text></svg>
            </div>
            <div class="h-14 rounded-lg bg-gradient-to-br from-emerald-400/20 to-emerald-300/10 border border-emerald-300/30 grid place-items-center">
              <svg viewBox="0 0 100 24" class="h-6 text-emerald-300" fill="currentColor"><text x="0" y="18" font-size="16" font-family="ui-sans-serif, system-ui">Town B</text></svg>
            </div>
            <div class="h-14 rounded-lg bg-gradient-to-br from-indigo-400/20 to-indigo-300/10 border border-indigo-300/30 grid place-items-center">
              <svg viewBox="0 0 100 24" class="h-6 text-indigo-300" fill="currentColor"><text x="0" y="18" font-size="16" font-family="ui-sans-serif, system-ui">Metro C</text></svg>
            </div>
            <div class="h-14 rounded-lg bg-gradient-to-br from-amber-400/20 to-amber-300/10 border border-amber-300/30 grid place-items-center">
              <svg viewBox="0 0 100 24" class="h-6 text-amber-300" fill="currentColor"><text x="0" y="18" font-size="16" font-family="ui-sans-serif, system-ui">City D</text></svg>
            </div>
            <div class="h-14 rounded-lg bg-gradient-to-br from-rose-400/20 to-rose-300/10 border border-rose-300/30 grid place-items-center">
              <svg viewBox="0 0 100 24" class="h-6 text-rose-300" fill="currentColor"><text x="0" y="18" font-size="16" font-family="ui-sans-serif, system-ui">Town E</text></svg>
            </div>
          </div>
          <div class="col-span-2 grid gap-4">
            <div class="rounded-xl bg-black/30 border border-white/10 p-5">
              <p class="text-sm md:text-base text-white/90">“Saved $1.2M in 18 months with citywide sensors.”</p>
              <p class="mt-2 text-xs text-white/80">Utilities Director, City A</p>
            </div>
            <div class="rounded-xl bg-black/30 border border-white/10 p-5">
              <p class="text-sm md:text-base text-white/90">“Compliance reporting is now a breeze.”</p>
              <p class="mt-2 text-xs text-white/80">Water Manager, Town B</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Problem → Solution -->
  <section id="how-it-works" class="relative z-10">
    <div class="mx-auto max-w-7xl px-6 py-10 md:py-14">
      <h2 class="text-2xl md:text-3xl font-bold">Leaks cost you daily. Here’s the fix.</h2>
      <div class="mt-6 grid md:grid-cols-4 gap-6">
        <div class="rounded-2xl bg-white/5 border border-white/10 p-6">
          <div class="h-10 w-10 grid place-items-center rounded-lg bg-rose-400/20 text-rose-300 mb-4">
            <svg viewBox="0 0 24 24" class="h-6 w-6" fill="currentColor"><path d="M12 2a10 10 0 100 20 10 10 0 000-20zm1 14h-2v-2h2v2zm0-4h-2V6h2v6z"/></svg>
          </div>
          <h3 class="font-semibold">Problem: Leaks</h3>
          <p class="mt-2 text-white/90">Invisible line breaks and aging pipes waste treated water.</p>
        </div>
        <div class="rounded-2xl bg-white/5 border border-white/10 p-6">
          <div class="h-10 w-10 grid place-items-center rounded-lg bg-amber-400/20 text-amber-300 mb-4">
            <svg viewBox="0 0 24 24" class="h-6 w-6" fill="currentColor"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"/></svg>
          </div>
          <h3 class="font-semibold">Impact: Revenue Loss</h3>
          <p class="mt-2 text-white/90">Lost revenue, higher costs, and public dissatisfaction.</p>
        </div>
        <div class="rounded-2xl bg-white/5 border border-white/10 p-6">
          <div class="h-10 w-10 grid place-items-center rounded-lg bg-cyan-400/20 text-cyan-300 mb-4">
            <svg viewBox="0 0 24 24" class="h-6 w-6" fill="currentColor"><path d="M12 3l4 4-9 9-4 1 1-4 9-9z"/></svg>
          </div>
          <h3 class="font-semibold">Solution: Smart Sensors</h3>
          <p class="mt-2 text-white/90">Real-time monitoring pinpoints leaks across the network.</p>
        </div>
        <div class="rounded-2xl bg-white/5 border border-white/10 p-6">
          <div class="h-10 w-10 grid place-items-center rounded-lg bg-emerald-400/20 text-emerald-300 mb-4">
            <svg viewBox="0 0 24 24" class="h-6 w-6" fill="currentColor"><path d="M9 16.17l-3.88-3.88L3.7 13.7l4.6 4.6 12-12-1.42-1.42z"/></svg>
          </div>
          <h3 class="font-semibold">Outcome: Savings</h3>
          <p class="mt-2 text-white/90">Cut losses and recover costs in months, not years.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Benefits -->
  <section id="benefits" class="relative z-10">
    <div class="mx-auto max-w-7xl px-6 py-10 md:py-14">
      <h2 class="text-2xl md:text-3xl font-bold">Why municipalities choose us</h2>
      <div class="mt-6 grid md:grid-cols-2 gap-6">
        <div class="rounded-2xl bg-white/5 border border-white/10 p-6 flex items-start gap-4">
          <div class="h-10 w-10 rounded-lg bg-emerald-400/20 text-emerald-300 grid place-items-center">
            <svg viewBox="0 0 24 24" class="h-6 w-6" fill="currentColor"><path d="M12 4a8 8 0 100 16 8 8 0 000-16zm1 10H8v-2h5v2z"/></svg>
          </div>
          <div>
            <h3 class="font-semibold">Real-time leak detection</h3>
            <p class="mt-1 text-white/90">Alerts within minutes to reduce water and revenue loss.</p>
          </div>
        </div>
        <div class="rounded-2xl bg-white/5 border border-white/10 p-6 flex items-start gap-4">
          <div class="h-10 w-10 rounded-lg bg-sky-400/20 text-sky-300 grid place-items-center">
            <svg viewBox="0 0 24 24" class="h-6 w-6" fill="currentColor"><path d="M4 4h16v2H4V4zm0 4h10v2H4V8zm0 4h16v2H4v-2zm0 4h10v2H4v-2z"/></svg>
          </div>
          <div>
            <h3 class="font-semibold">Simplified compliance reporting</h3>
            <p class="mt-1 text-white/90">Automated summaries for state and federal reporting.</p>
          </div>
        </div>
        <div class="rounded-2xl bg-white/5 border border-white/10 p-6 flex items-start gap-4">
          <div class="h-10 w-10 rounded-lg bg-indigo-400/20 text-indigo-300 grid place-items-center">
            <svg viewBox="0 0 24 24" class="h-6 w-6" fill="currentColor"><path d="M12 3l9 4-9 4-9-4 9-4zm0 7l9 4-9 4-9-4 9-4z"/></svg>
          </div>
          <div>
            <h3 class="font-semibold">ROI in 12–18 months</h3>
            <p class="mt-1 text-white/90">Fast payback backed by proven field results.</p>
          </div>
        </div>
        <div class="rounded-2xl bg-white/5 border border-white/10 p-6 flex items-start gap-4">
          <div class="h-10 w-10 rounded-lg bg-amber-400/20 text-amber-300 grid place-items-center">
            <svg viewBox="0 0 24 24" class="h-6 w-6" fill="currentColor"><path d="M3 12l18-9-9 18-2-7z"/></svg>
          </div>
          <div>
            <h3 class="font-semibold">No infrastructure overhaul</h3>
            <p class="mt-1 text-white/90">Non-invasive rollout that fits your network.</p>
          </div>
        </div>
      </div>
    </div>
  </section>
<!-- Outcomes & Projected Results -->
<section id="results" class="relative z-10">
  <div class="mx-auto max-w-7xl px-6 py-10 md:py-14">
    <h2 class="text-2xl md:text-3xl font-bold">Outcomes & Projected Results</h2>
    <p class="mt-2 text-white/90">
      Based on the funnel design and campaign strategy outlined above, these are the key performance indicators this approach was built to achieve.
    </p>

    <div class="mt-6 grid md:grid-cols-3 gap-6">
      <div class="rounded-2xl bg-white/5 border border-white/10 p-6">
        <div class="text-2xl font-extrabold text-emerald-300">60</div>
        <p class="mt-1 text-white/90">Qualified leads per month <span class="block text-xs text-white/60">Projected from lead capture benchmarks</span></p>
      </div>
      <div class="rounded-2xl bg-white/5 border border-white/10 p-6">
        <div class="text-2xl font-extrabold text-sky-300">$225K–$300K</div>
        <p class="mt-1 text-white/90">Monthly revenue <span class="block text-xs text-white/60">Estimated from average contract value × close rate</span></p>
      </div>
      <div class="rounded-2xl bg-white/5 border border-white/10 p-6">
        <div class="text-2xl font-extrabold text-indigo-300">25%</div>
        <p class="mt-1 text-white/90">Demo booking rate <span class="block text-xs text-white/60">Based on optimized CTA placement</span></p>
      </div>
    </div>

    <!-- Simple SVG chart -->
    <div class="mt-6 rounded-2xl bg-white/5 border border-white/10 p-6">
      <svg viewBox="0 0 200 100" class="w-full h-32">
        <path d="M0,100 L50,50 L100,30 L150,20 L200,10" fill="none" stroke="rgb(34,197,94)" stroke-width="2"/>
        <text x="0" y="90" fill="white" font-size="10">Month 1</text>
        <text x="190" y="20" fill="white" font-size="10">Month 3</text>
        <text x="100" y="90" fill="white" font-size="10">Leads</text>
      </svg>
      <p class="mt-2 text-xs text-white/80">Lead growth projection over 90 days, based on comparable municipal campaigns</p>
    </div>
  </div>
</section>
  <section id="cta" class="relative z-10 bg-white/5 border-t border-white/10">
  <div class="mx-auto max-w-4xl px-6 py-12 text-center">
    <h2 class="text-2xl md:text-3xl font-bold text-white">Let’s Create Impact Together</h2>
    <p class="mt-3 text-white/80 max-w-2xl mx-auto">
      If these results reflect the kind of strategic thinking and measurable outcomes you value, I’d be excited to bring this approach to your team.
    </p>
    <div class="mt-6 flex flex-wrap justify-center gap-4">
      <a href="mailto:Edwin.june99@gmail.com" class="px-6 py-3 rounded-lg bg-emerald-500 hover:bg-emerald-600 transition text-sm font-semibold text-white ring-focus">
        Contact Me
      </a>
      <a href="portfolio.html#viewCV" class="px-6 py-3 rounded-lg bg-sky-500 hover:bg-sky-600 transition text-sm font-semibold text-white ring-focus">
        View My CV
      </a>
      <a href="portfolio.html#portfolio" class="px-6 py-3 rounded-lg bg-white/10 hover:bg-white/20 transition text-sm font-semibold text-white ring-focus">
        See More Work
      </a>
    </div>
  </div>
</section>
  
  <!-- Calculator -->
  <section id="calculator" class="relative z-10">
    <div class="mx-auto max-w-7xl px-6 pt-8 pb-12 md:pt-12 md:pb-16 grid lg:grid-cols-2 gap-10 items-start">
      <div class="fade-in">
        <p class="text-sky-300/90 text-sm font-medium tracking-wide uppercase">Water Loss Savings Calculator</p>
        <h2 id="heroHeadline" class="mt-2 text-3xl md:text-5xl font-extrabold leading-tight">
          Find Your Loss
        </h2>
        <p class="mt-3 text-white/90 text-lg">
          Enter a few details to estimate annual loss and a 3‑year savings projection.
        </p>
        <!-- A/B toggle bar -->
        <div class="mt-5 glass border border-white/10 rounded-xl px-4 py-3 flex flex-wrap items-center gap-4">
          <div class="flex items-center gap-2">
            <span class="text-xs text-white/80">Headline</span>
            <div class="flex rounded-lg overflow-hidden border border-white/10">
              <button id="abHeadlineA" tabindex="0" role="button" aria-label="Select headline A" class="px-3 py-1.5 text-xs bg-white/10 hover:bg-white/15">Find Your Loss</button>
              <button id="abHeadlineB" tabindex="0" role="button" aria-label="Select headline B" class="px-3 py-1.5 text-xs hover:bg-white/10">Save Millions</button>
            </div>
          </div>
          <div class="flex items-center gap-2">
            <span class="text-xs text-white/80">CTA Color</span>
            <div class="flex rounded-lg overflow-hidden border border-white/10">
              <button id="ctaBlue" tabindex="0" role="button" aria-label="Select blue CTA" class="px-3 py-1.5 text-xs bg-white/10 hover:bg-white/15">Blue</button>
              <button id="ctaGreen" tabindex="0" role="button" aria-label="Select green CTA" class="px-3 py-1.5 text-xs hover:bg-white/10">Green</button>
            </div>
          </div>
          <details class="text-[10px] text-white/80">
            <summary class="cursor-pointer">Demo Note</summary>
            Toggles change what you see; no backend data is saved.
          </details>
        </div>
      </div>
      <div class="fade-in lg:justify-self-end w-full">
        <div class="rounded-2xl glass border border-white/10 p-5 md:p-6">
          <form id="calcForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label for="population" class="block text-sm mb-1">Population</label>
              <input id="population" class="number w-full rounded-lg bg-white/10 border border-white/15 px-3 py-2 focus:ring-2 focus:ring-sky-400/40" type="number" inputmode="numeric" min="0" step="1" placeholder="e.g., 75,000" required />
            </div>
            <div>
              <label for="rate" class="block text-sm mb-1">Water Rate ($ per 1,000 gal)</label>
              <input id="rate" class="number w-full rounded-lg bg-white/10 border border-white/15 px-3 py-2 focus:ring-2 focus:ring-sky-400/40" type="number" inputmode="decimal" min="0" step="0.01" placeholder="e.g., 4.00" required />
            </div>
            <div class="tooltip" data-tooltip="20% is the AWWA average for non-revenue water loss.">
              <label for="loss" class="block text-sm mb-1">Loss %</label>
              <input id="loss" class="number w-full rounded-lg bg-white/10 border border-white/15 px-3 py-2 focus:ring-2 focus:ring-sky-400/40" type="number" inputmode="decimal" min="0" max="100" step="0.1" value="20" required />
            </div>
            <div class="md:col-span-2">
              <details id="assumptions" class="rounded-lg bg-white/5 border border-white/10 p-3">
                <summary class="cursor-pointer select-none text-sm text-white/90">Assumption: Average use per person</summary>
                <div class="mt-3 grid grid-cols-1 sm:grid-cols-3 gap-3">
                  <div>
                    <label for="gpd" class="block text-xs mb-1 text-white/85">Gallons per person per day</label>
                    <input id="gpd" class="number w-full rounded-lg bg-white/10 border border-white/15 px-3 py-2 focus:ring-2 focus:ring-sky-400/40" type="number" inputmode="decimal" min="1" step="1" value="100" />
                  </div>
                  <div class="sm:col-span-2 text-xs text-white/80">
                    Default is 100 gal/person/day. Adjust based on metered data.
                  </div>
                </div>
              </details>
            </div>
            <div class="md:col-span-2 grid sm:grid-cols-2 gap-4 mt-2">
              <div class="rounded-xl bg-black/30 border border-white/10 p-4">
                <div class="text-sm text-white/80">Estimated Annual Loss</div>
                <div id="annualLoss" aria-live="polite" class="mt-1 text-2xl font-extrabold text-emerald-300">$0</div>
                <div id="annualContext" class="mt-1 text-xs text-white/80"></div>
              </div>
              <div class="rounded-xl bg-black/30 border border-white/10 p-4">
                <div class="text-sm text-white/80">3‑Year Savings Projection</div>
                <div id="threeYear" aria-live="polite" class="mt-1 text-2xl font-extrabold text-sky-300">$0</div>
                <div id="threeYearBreakdown" class="mt-1 text-xs text-white/80"></div>
              </div>
            </div>
            <div class="md:col-span-2 mt-2">
              <button id="reportBtn" type="button" class="focus-ring w-full rounded-xl px-5 py-3 font-semibold text-sky-950 bg-sky-400 hover:bg-sky-300 transition">
                See Your Savings Now
              </button>
              <details class="mt-2 text-[11px] text-white/80">
                <summary class="cursor-pointer">Demo Note</summary>
                This creates a local report download; email sending is not enabled.
              </details>
            </div>
          </form>
        </div>
      </div>
    </div>
  </section>

  <!-- Guide CTA -->
  <section id="guide" class="relative z-10">
    <div class="mx-auto max-w-3xl px-6 py-10 md:py-14">
      <div class="rounded-2xl bg-white/5 border border-white/10 p-6 md:p-8">
        <h2 class="text-2xl md:text-3xl font-bold">Download the Free Guide</h2>
        <p class="mt-2 text-white/90">A concise playbook to cut non‑revenue water and save millions.</p>
        <p class="mt-2 text-sm text-emerald-300/90">Limited offer: Download before <span id="countdown"></span></p>
        <details class="mt-2 text-xs text-white/80">
          <summary class="cursor-pointer">Demo Note</summary>
          Your file downloads locally; no email is sent.
        </details>
        <form id="guideForm" class="mt-6 grid md:grid-cols-2 gap-4">
          <div class="md:col-span-1">
            <label for="email" class="block text-sm mb-1">Work Email</label>
            <input id="email" name="email" type="email" required placeholder="alex@city.gov" class="w-full rounded-lg bg-white/10 border border-white/15 px-3 py-2 placeholder:text-white/60 focus:ring-2 focus:ring-sky-400/40" />
          </div>
          <div class="md:col-span-1 flex items-end">
            <button type="submit" class="w-full focus-ring rounded-lg bg-emerald-500 hover:bg-emerald-400 text-emerald-950 font-semibold px-4 py-2 transition glow">
              Download Free Guide
            </button>
          </div>
        </form>
        <p class="mt-3 text-xs text-white/80">By downloading, you consent to receive the guide. No third‑party sharing.</p>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="relative z-10">
    <div class="mx-auto max-w-7xl px-6 py-10 border-t border-white/10 text-sm text-white/80">
      <div class="flex flex-col md:flex-row items-start md:items-center justify-between gap-4">
        <p>© <span id="year"></span> WaterLoss Insights</p>
        <div class="flex items-center gap-4">
          <button id="ctaCalculateFooter" class="focus-ring rounded-lg bg-emerald-500 hover:bg-emerald-400 text-emerald-950 font-semibold px-4 py-2 transition">
            Calculate Your Loss
          </button>
          <a href="#guide" class="focus-ring rounded-lg bg-white/10 hover:bg-white/15 text-white font-semibold px-4 py-2 transition border border-white/15">Download Guide</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Modal: Report (Demo) -->
  <div id="modal" class="fixed inset-0 z-50 hidden">
    <div class="absolute inset-0 bg-black/60 backdrop-blur-sm"></div>
    <div class="relative mx-auto max-w-lg mt-24 px-6">
      <div class="rounded-2xl bg-slate-900 border border-white/10 p-6">
        <div class="flex items-start justify-between gap-6">
          <div>
            <h3 class="text-xl font-bold">Detailed Report (Demo)</h3>
            <p class="mt-1 text-white/90">Emails aren’t sent from this page. You’ll get a local download instead.</p>
          </div>
          <button id="closeModal" class="focus-ring h-9 w-9 rounded-lg bg-white/10 hover:bg-white/15 grid place-items-center">
            <svg viewBox="0 0 24 24" class="h-5 w-5 text-white/90" fill="currentColor"><path d="M18.3 5.71L12 12l6.3 6.29-1.41 1.42L10.59 13.4 4.29 19.71 2.88 18.3 9.17 12 2.88 5.71 4.29 4.29 10.59 10.6l6.3-6.31z"/></svg>
          </button>
        </div>
        <div class="mt-5 flex justify-end">
          <button id="downloadReport" class="focus-ring rounded-lg bg-sky-400 hover:bg-sky-300 text-sky-950 font-semibold px-4 py-2">Download Now</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="fixed bottom-5 left-1/2 -translate-x-1/2 z-50 hidden">
    <div class="rounded-xl bg-black/70 text-white px-4 py-2 text-sm border border-white/10 shadow-xl">
      Report downloaded
    </div>
  </div>

  <script>
    // Helpers
    const $ = (id) => document.getElementById(id);
    const fmt = (n) => n.toLocaleString(undefined, { style: 'currency', currency: 'USD', maximumFractionDigits: 0 });
    const clamp = (v, min, max) => Math.max(min, Math.min(max, v));
    $('year').textContent = new Date().getFullYear();

    // Dynamic hero loss (sample $2.6M based on AWWA averages)
    $('heroLoss').textContent = fmt(2600000);

    // Countdown timer for guide
    const endDate = new Date();
    endDate.setDate(endDate.getDate() + 7);
    const updateCountdown = () => {
      const now = new Date();
      const diff = endDate - now;
      if (diff <= 0) return $('countdown').textContent = 'Offer expired';
      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      $('countdown').textContent = `${days}d ${hours}h`;
    };
    updateCountdown();
    setInterval(updateCountdown, 3600000);

    // Smooth scroll CTAs to calculator with UTM tracking
    const scrollToCalc = () => {
      gtag('event', 'click', { 'event_category': 'CTA', 'event_label': 'Calculate Loss', 'utm_source': 'landing', 'utm_medium': 'button' });
      document.getElementById('calculator').scrollIntoView({ behavior: 'smooth', block: 'start' });
    };
    ['ctaCalculateTop','ctaCalculateHero','ctaCalculateFooter'].forEach(id => {
      const el = $(id);
      if (el) el.addEventListener('click', scrollToCalc);
    });

    // Calculator logic with validation
    const calculate = () => {
      const population = Math.max(0, parseFloat(($('population').value || '0').replace(/,/g,'')));
      const rate = Math.max(0, parseFloat($('rate').value || '0'));
      const lossPct = clamp(parseFloat($('loss').value || '0'), 0, 100);
      const gpd = Math.max(1, parseFloat($('gpd').value || '100'));

      if (!population || !rate || !lossPct) {
        $('annualLoss').textContent = '$0';
        $('threeYear').textContent = '$0';
        return {};
      }

      const annualGallons = population * gpd * 365;
      const lostGallons = annualGallons * (lossPct / 100);
      const annualLoss = (lostGallons / 1000) * rate;

      const y1Rec = 0.30, y2Rec = 0.20, y3Rec = 0.10; // 60% total
      const y1 = annualLoss * y1Rec;
      const y2 = annualLoss * y2Rec;
      const y3 = annualLoss * y3Rec;
      const threeYear = y1 + y2 + y3;

      $('annualLoss').textContent = fmt(annualLoss);
      $('annualContext').textContent = `~${Math.round(lostGallons).toLocaleString()} gal lost / year at ${lossPct}%`;
      $('threeYear').textContent = fmt(threeYear);
      $('threeYearBreakdown').textContent = `Year 1: ${fmt(y1)} · Year 2: ${fmt(y2)} · Year 3: ${fmt(y3)} (60% recovery)`;

      return { population, rate, lossPct, gpd, annualGallons, lostGallons, annualLoss, y1, y2, y3, threeYear };
    };

    // Seed defaults and listeners
    if (!$('population').value) $('population').value = 75000;
    if (!$('rate').value) $('rate').value = 4.00;
    ['population','rate','loss','gpd'].forEach(id => {
      $(id).addEventListener('input', calculate);
    });
    calculate();

    // A/B testing
    const setHeadline = (variant) => {
      $('heroHeadline').textContent = variant === 'B' ? 'Save Millions' : 'Find Your Loss';
      $('abHeadlineA').classList.toggle('bg-white/10', variant !== 'B');
      $('abHeadlineB').classList.toggle('bg-white/10', variant === 'B');
      gtag('event', 'ab_test', { 'event_category': 'Headline', 'event_label': variant });
    };
    const setCTAColor = (color) => {
      const btn = $('reportBtn');
      btn.className = color === 'green' ?
        'focus-ring w-full rounded-xl px-5 py-3 font-semibold text-emerald-950 bg-emerald-400 hover:bg-emerald-300 transition' :
        'focus-ring w-full rounded-xl px-5 py-3 font-semibold text-sky-950 bg-sky-400 hover:bg-sky-300 transition';
      $('ctaBlue').classList.toggle('bg-white/10', color !== 'green');
      $('ctaGreen').classList.toggle('bg-white/10', color === 'green');
      gtag('event', 'ab_test', { 'event_category': 'CTA Color', 'event_label': color });
    };
    $('abHeadlineA').addEventListener('click', () => setHeadline('A'));
    $('abHeadlineB').addEventListener('click', () => setHeadline('B'));
    $('ctaBlue').addEventListener('click', () => setCTAColor('blue'));
    $('ctaGreen').addEventListener('click', () => setCTAColor('green'));
    setHeadline('A');
    setCTAColor('blue');

    // Report flow (Demo)
    const modal = $('modal');
    const toast = $('toast');
    const pingToast = (msg='Report downloaded') => {
      toast.querySelector('div').textContent = msg;
      toast.classList.remove('hidden');
      setTimeout(() => toast.classList.add('hidden'), 1800);
    };
    const show = (el) => { el.classList.remove('hidden'); document.body.style.overflow='hidden'; };
    const hide = (el) => { el.classList.add('hidden'); document.body.style.overflow=''; };

    $('reportBtn').addEventListener('click', () => {
      if (!$('calcForm').reportValidity()) return;
      show(modal);
      gtag('event', 'click', { 'event_category': 'CTA', 'event_label': 'Report Download' });
    });
    $('closeModal').addEventListener('click', () => hide(modal));
    $('downloadReport').addEventListener('click', () => {
      const r = calculate();
      if (!r.annualLoss) return pingToast('Please fill all fields');
      const report = `Water Loss Savings Report
=============================

Inputs
------
Population: ${r.population.toLocaleString()}
Water rate: $${Number(r.rate).toFixed(2)} per 1,000 gallons
Loss: ${r.lossPct.toFixed(1)}%
Assumption: ${r.gpd} gallons per person per day

Estimates
---------
Annual volume: ${(r.annualGallons).toLocaleString()} gallons
Annual loss volume: ${Math.round(r.lostGallons).toLocaleString()} gallons
Estimated annual loss: ${fmt(r.annualLoss)}

3-Year Savings Projection
------------------------
Assumed recovery: 60% over 3 years (30% + 20% + 10%)
Year 1: ${fmt(r.y1)}
Year 2: ${fmt(r.y2)}
Year 3: ${fmt(r.y3)}
Total (3 years): ${fmt(r.threeYear)}

Notes
-----
• Adjust per-capita usage with metered data for precision.
• Email sending is not enabled; this is a local demo.

© ${new Date().getFullYear()} WaterLoss Insights`;
      const blob = new Blob([report], { type: 'text/plain;charset=utf-8' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'Water_Loss_Savings_Report.txt';
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
      hide(modal);
      pingToast();
    });

    // Guide download (Demo)
    $('guideForm')?.addEventListener('submit', (e) => {
      e.preventDefault();
      const email = ($('email')?.value || '').trim();
      const guide = `
Water Loss Reduction Guide (Demo)
===============================

Thanks for your interest! This guide outlines:
- How to spot non-revenue water fast
- A proven 4-step rollout
- Typical ROI in 12–18 months
- Compliance shortcuts that save time

Next steps:
1) Estimate losses with the Calculator.
2) Prioritize zones by age and break history.
3) Start with a 90-day pilot.

Contact: ${email || 'your email'}

© ${new Date().getFullYear()} WaterLoss Insights — Demo download`;
      const blob = new Blob([guide], { type: 'text/plain;charset=utf-8' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'Water_Leak_Reduction_Guide.txt';
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
      gtag('event', 'click', { 'event_category': 'CTA', 'event_label': 'Guide Download' });
      pingToast('Guide downloaded');
    });
  </script>
</body>
</html>





